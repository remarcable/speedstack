.topBar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  padding: clamp(0.5rem, 2vw, var(--spacing-xl));
  background: var(--color-bg-secondary);
  z-index: 10;
  font-size: clamp(0.875rem, 2.5vw, 1rem);
}

.timerContainer {
  position: relative;
  justify-self: center;
}

.timer {
  color: var(--color-text-primary);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  font-variant-numeric: tabular-nums;
  min-width: 4ch;
  text-align: center;
}

.timeDeltaPopup {
  position: absolute;
  top: -0.5rem;
  right: -2rem;
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-sm);
  pointer-events: none;
  animation: fadeUpSmall 600ms ease-out forwards;
  opacity: 1;
}

.timeDeltaPopup.positive {
  color: var(--color-text-primary);
}

.timeDeltaPopup.negative {
  color: var(--color-text-primary);
}

.gameTitle {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  justify-self: start;
  margin: 0;
}

.timerGreen {
  color: var(--color-text-primary);
}

.timerYellow {
  color: var(--color-text-primary);
}

.timerRed {
  color: var(--color-text-primary);
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.gameInfo {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: var(--spacing-md);
  color: var(--color-text-primary);
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-medium);
  justify-self: end;
}

.levelInfo,
.scoreInfo {
  position: relative;
  text-wrap: nowrap;
}

.pointsEarnedPopup {
  position: absolute;
  top: -0.5rem;
  right: -1rem;
  color: var(--color-text-primary);
  font-weight: var(--font-weight-bold);
  font-size: var(--font-size-sm);
  pointer-events: none;
  animation: fadeUpSmall 600ms ease-out forwards;
  opacity: 1;
}

@keyframes fadeUpSmall {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0.8);
  }
  20% {
    opacity: 1;
    transform: translateY(-2px) scale(1);
  }
  80% {
    opacity: 1;
    transform: translateY(-10px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-15px) scale(1);
  }
}

/* Mobile responsiveness */
@media (max-width: 640px) {
  /* Mobile header layout: timer left, game info right, title hidden */
  .topBar {
    grid-template-columns: 1fr auto 1fr;
    grid-template-rows: auto;
    padding: var(--spacing-sm) var(--spacing-md);
    gap: var(--spacing-xs);
  }

  .gameTitle {
    display: none;
  }

  .timerContainer {
    grid-column: 1;
    grid-row: 1;
    justify-self: start;
  }

  .timer {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
  }

  .gameInfo {
    grid-column: 3;
    grid-row: 1;
    justify-self: end;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-normal);
  }

  .levelInfo,
  .scoreInfo {
    font-size: var(--font-size-sm);
  }
}
